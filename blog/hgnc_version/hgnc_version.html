<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2024-11-30 Sat 13:53 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>HGNC Version Control</title>
<meta name="author" content="Barış Salman" />
<meta name="generator" content="Org Mode" />
<style type="text/css">
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>

<script async src="https://analytics.umami.is/script.js" data-website-id="c0d0b77c-5c98-4814-9721-bb72437e9467"></script>
<link rel="shortcut icon" href="https://omics.sbs/static/base/img/fav.ico" />
<link rel="stylesheet" href="https://omics.sbs/static/base/css/latex.css" />
<link rel="stylesheet" href="https://omics.sbs/static/base/css/style.css" />
<style>img{max-width:100%}</style>
<style>details{background-color:#fff !important}</style>
<link href="https://cdn.jsdelivr.net/npm/zoom-vanilla.js/dist/zoom.css" rel="stylesheet">
<script data-isso="//comments.omics.sbs/" src="//comments.omics.sbs/js/embed.min.js"></script>
<script>
// @license magnet:?xt=urn:btih:1f739d935676111cfff4b4693e3816e664797050&amp;dn=gpl-3.0.txt GPL-v3-or-Later
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
// @license-end
</script>
</head>
<body>
<div id="preamble" class="status">

<script>
if (localStorage.darkMode == "true") {
  document.body.classList.add("latex-dark");
}
else {
  document.body.classList.remove("latex-dark");
}
if (localStorage.typeface == "Libertinus") {
    document.body.classList.add("libertinus")
}
else {
    document.body.classList.remove("libertinus")
}
</script>

    <ul id="navbar">
        <li>
            <a href="https://omics.sbs/">Home</a>
        </li>
        <li>
            <a href="https://omics.sbs/blog">Blog</a>
        </li>
        <li>
            <a href="https://omics.sbs/notes">Notes</a>
        </li>
        <li>
            <a href="https://omics.sbs/bioscripts">Bioscripts</a>
        </li>
        <li class="preferences">
            <button class="dark-mode-button" id="dark-mode-toggle" aria-label="Toggle color mode"
                title="Toggle color mode">
                <div class="sun">
                </div>
                <div class="moon">
                    <div class="star"></div>
                    <div class="star small"></div>
                </div>
            </button>
        </li>
        <li class="preferences">
            <input type="button" id="typeface-toggle" title="" value="Aa">
        </li>
    </ul>
</div>
<div id="content" class="content">
<h1 class="title">HGNC Version Control</h1>
<div class="post-tag" id="org4fa29b9">
<p>
24 Jun 2024 — Barış Salman
</p>

<p>
Links
</p>
<ul class="org-ul">
<li><a href="https://www.biostars.org/p/9597593/">Biostars post</a></li>
<li><a href="https://github.com/barslmn/hgnc-data">Source repository</a></li>
<li><a href="https://omics.sbs/bioscripts/hgnc_version/">App</a></li>
</ul>

</div>

<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orgbbe3959">1. Introduction</a></li>
<li><a href="#org3827d6a">2. Implementation</a>
<ul>
<li><a href="#org4e0bf3a">2.1. Why git?</a></li>
<li><a href="#org3e53026">2.2. Why not just diff the whole file?</a></li>
<li><a href="#org023fb17">2.3. Notes on storage</a></li>
</ul>
</li>
<li><a href="#orgb5c8597">3. App</a></li>
<li><a href="#org11268d4">Appendix</a>
<ul>
<li><a href="#orgd0729b8">HGNC parse and commit script</a></li>
<li><a href="#orgad64509">Visualization frontend</a></li>
<li><a href="#org231c2f8">Django backend</a></li>
</ul>
</li>
<li><a href="#orga251a35">4. References</a></li>
<li><a href="#org0962011">5. Acronyms</a></li>
<li><a href="#orge3fdd9d">Comments</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgbbe3959" class="outline-2">
<h2 id="orgbbe3959"><span class="section-number-2">1.</span> Introduction</h2>
<div class="outline-text-2" id="text-1">
<p>
This will be the start of a series of posts about tracking versions of the genetic concepts of gene symbols, transcripts, and variants.
Gene is a hard-to-define concept.
HUGO Gene Nomenclature Committee
 (<a class="org-gls" href="#gls.1" id="glsr.1.1">HGNC</a>) is the authority that curates the human gene symbols.
The <a class="org-gls" href="#gls.1" id="glsr.1.2">HGNC</a> guidelines page summarizes genes in the following sections:
</p>
<ul class="org-ul">
<li>Protein coding genes</li>
<li>Pseudogenes</li>
<li>Non-coding RNA genes</li>
<li>Readthrough transcripts</li>
<li>Genes only found in a subset of the population</li>
</ul>

<p>
Gene symbols and their other annotations are not static and change.
Especially with newer technologies like perturb-seq we are now discovering more of their biological functions and naming them accordingly. (<a href="#citeproc_bib_item_1">Replogle et al. 2022</a>)
<a class="org-gls" href="#gls.1" id="glsr.1.3">HGNC</a> summarize the new gene and gene family entries, and what changed in their 2023 paper. (<a href="#citeproc_bib_item_2">Seal et al. 2022</a>)
</p>

<p>
<a href="https://ftp.ebi.ac.uk/pub/databases/genenames/hgnc/archive/monthly/tsv/">They release the new data table on gene symbols monthly.</a>
With these, they also make available the monthly changes.
I wanted something a bit more comprehensive than these monthly changes and the ability to keep track of the gene changes over the months.
</p>
</div>
</div>
<div id="outline-container-org3827d6a" class="outline-2">
<h2 id="org3827d6a"><span class="section-number-2">2.</span> Implementation</h2>
<div class="outline-text-2" id="text-2">
<p>
For this, I come up with the following:
</p>
<ol class="org-ol">
<li>We create a git repository.</li>
<li>We flatten the tables to the files:
<ul class="org-ul">
<li><a class="org-gls" href="#gls.1" id="glsr.1.4">HGNC</a> IDs as the subdirectories, columns as file names and the rows as the data in the files.</li>
</ul></li>
<li>We then commit and tag the month.</li>
<li>Repeat steps 2 and 3 for every month.</li>
<li>Query the repository for the given symbol.</li>
<li>Make a heatmap from the results.</li>
</ol>


<div id="orgceaaa2e" class="figure">
<p><img src="_20240401_120126screenshot.png" alt="_20240401_120126screenshot.png" data-action="zoom" />
</p>
</div>
</div>
<div id="outline-container-org4e0bf3a" class="outline-3">
<h3 id="org4e0bf3a"><span class="section-number-3">2.1.</span> Why git?</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Git is the first thing that comes to mind when version control is concerned.
It seemed like a good project to learn git.
It may be more performant or easier to maintain in a database like dolt, or using django-reversion.
</p>
</div>
</div>
<div id="outline-container-org3e53026" class="outline-3">
<h3 id="org3e53026"><span class="section-number-3">2.2.</span> Why not just diff the whole file?</h3>
<div class="outline-text-3" id="text-2-2">
<p>
One concern here is the fact that we are flatting the contents of the file to a lot of files; 1005973 files to be exact.
It would be the number of rows &times; the number of columns which is 43903 &times; 54 but most of the cells are empty so those are not written.
</p>

<p>
While flattening we use <a class="org-gls" href="#gls.1" id="glsr.1.5">HGNC</a> ids for the subdirectories.
This way we can directly query the changes made to that id using the following command.
</p>

<label for="sn-symbol" class="sidenote-toggle">⊕</label>
<input type="checkbox" id="sn-symbol" class="sidenote-toggle">
<div class="sidenote" id="orgba62850">
<p>
Git syntax allows for directory-based query by giving a directory name after &ldquo;&#x2013;&rdquo;
</p>

</div>

<div class="org-src-container">
<pre class="src src-shell"><span style="color: #8f3f71;">git</span> --git-dir &lt;repo_path&gt; log -p --name-status --pretty=<span style="color: #79740e;">"%d"</span> -- HGNC:&lt;hgnc_id&gt;
</pre>
</div>

<p>
This gives a much more concise result and, easier to parse id-based diffs.
It would be harder to discern if the text files as a whole were committed.
It takes around ~75 seconds to commit a single file.
</p>
</div>
</div>
<div id="outline-container-org023fb17" class="outline-3">
<h3 id="org023fb17"><span class="section-number-3">2.3.</span> Notes on storage</h3>
<div class="outline-text-3" id="text-2-3">
<p>
The text files that <a class="org-gls" href="#gls.1" id="glsr.1.6">HGNC</a> stores take around 500Mb as of today.
Individual TXT files are about 16M, so it will increase linearly over the months at a rate of 16 M.
</p>

<p>
Flatting out the separate files takes around 4.5G.
Since we are just overwriting, this number should change in case <a class="org-gls" href="#gls.1" id="glsr.1.7">HGNC</a> adds or removes columns.
</p>

<p>
The bare git repository with all the months committed takes around 115M.
Every new commit is around 1M, so the increase rate is smaller compared to TXT files.
I am only keeping the bare repo on the website so it&rsquo;s space efficient.
</p>

<pre class="example" id="org4e3fb6a">
❯ du -hs txts
518M    txts
❯ du -hs hgnc-data
4.4G    hgnc-data
❯ du -hs ../hgnc-data.git
115M    ../hgnc-data.git
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb5c8597" class="outline-2">
<h2 id="orgb5c8597"><span class="section-number-2">3.</span> App</h2>
<div class="outline-text-2" id="text-3">

<div id="orga0ed36c" class="figure">
<p><img src="_20240623_164437screenshot.png" alt="_20240623_164437screenshot.png" />
</p>
</div>

<p>
There is a simple input box for entering the gene symbol with autocomplete.
After the symbol is selected Django runs a subprocess and queries the repository with the two following commands:
</p>

<div class="org-src-container">
<pre class="src src-shell"><span style="color: #8f3f71;">git</span> --git-dir <span style="color: #076678;">{</span>os.path.join<span style="color: #b16286;">(</span>hgnc_data_path, <span style="color: #79740e;">"hgnc-data.git"</span><span style="color: #b16286;">)</span><span style="color: #076678;">}</span> <span style="color: #af3a03;">log</span> -p --name-status --pretty=<span style="color: #79740e;">"%d"</span> -- HGNC:<span style="color: #076678;">{</span>hgnc_id<span style="color: #076678;">}</span>

<span style="color: #8f3f71;">git</span> --git-dir <span style="color: #076678;">{</span>os.path.join<span style="color: #b16286;">(</span>hgnc_data_path, <span style="color: #79740e;">"hgnc-data.git"</span><span style="color: #b16286;">)</span><span style="color: #076678;">}</span> <span style="color: #af3a03;">log</span> -p  --pretty=<span style="color: #79740e;">"%d"</span> -- HGNC:<span style="color: #076678;">{</span>hgnc_id<span style="color: #076678;">}</span> | <span style="color: #8f3f71;">grep</span> -v <span style="color: #79740e;">"^index\|^---\|^+++\|No newline \|^@\|^new"</span>| sed <span style="color: #79740e;">"/^\s*$/d"</span>
</pre>
</div>

<p>
After a bit more parsing and merging the result of the two commands a simple Comma separated values
 (<a class="org-gls" href="#gls.2" id="glsr.2.1">CSV</a>), ready to be plotted, is returned to the frontend.
</p>
</div>
</div>
<div id="outline-container-org11268d4" class="outline-2">
<h2 id="org11268d4">Appendix</h2>
<div class="outline-text-2" id="text-org11268d4">
</div>
<div id="outline-container-orgd0729b8" class="outline-3">
<h3 id="orgd0729b8">HGNC parse and commit script</h3>
<div class="outline-text-3" id="text-orgd0729b8">
<p>
The Script parses and writes <a class="org-gls" href="#gls.1" id="glsr.1.8">HGNC</a> tables to the files.
This script also tags and commits the changes.
The git repository should be initialized before running the script.
</p>

<details class="code-details"
                 style ="padding: 1em;
                          background-color: #e5f5e5;
                          border-radius: 15px;
                          color: hsl(157 75%);
                          font-size: 0.9em;
                          box-shadow: 0.05em 0.1em 5px 0.01em  #00000057;">
                  <summary>
                    <strong>
                      <font face="Courier" size="3" color="green">
                         Click to see the implementation
                      </font>
                    </strong>
                  </summary>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #a89984;">#</span><span style="color: #a89984;">!/usr/bin/env python3</span>
<span style="color: #9d0006;">import</span> csv
<span style="color: #9d0006;">import</span> sys
<span style="color: #9d0006;">from</span> datetime <span style="color: #9d0006;">import</span> datetime
<span style="color: #9d0006;">from</span> pathlib <span style="color: #9d0006;">import</span> Path
<span style="color: #9d0006;">import</span> subprocess

<span style="color: #076678;">column_names</span> = [
&#9474;   <span style="color: #79740e;">"hgnc_id"</span>,
&#9474;   <span style="color: #79740e;">"symbol"</span>,
&#9474;   <span style="color: #79740e;">"name"</span>,
&#9474;   <span style="color: #79740e;">"locus_group"</span>,
&#9474;   <span style="color: #79740e;">"locus_type"</span>,
&#9474;   <span style="color: #79740e;">"status"</span>,
&#9474;   <span style="color: #79740e;">"location"</span>,
&#9474;   <span style="color: #79740e;">"location_sortable"</span>,
&#9474;   <span style="color: #79740e;">"alias_symbol"</span>,
&#9474;   <span style="color: #79740e;">"alias_name"</span>,
&#9474;   <span style="color: #79740e;">"prev_symbol"</span>,
&#9474;   <span style="color: #79740e;">"prev_name"</span>,
&#9474;   <span style="color: #79740e;">"gene_group"</span>,
&#9474;   <span style="color: #79740e;">"gene_group_id"</span>,
&#9474;   <span style="color: #79740e;">"date_approved_reserved"</span>,
&#9474;   <span style="color: #79740e;">"date_symbol_changed"</span>,
&#9474;   <span style="color: #79740e;">"date_name_changed"</span>,
&#9474;   <span style="color: #79740e;">"date_modified"</span>,
&#9474;   <span style="color: #79740e;">"entrez_id"</span>,
&#9474;   <span style="color: #79740e;">"ensembl_gene_id"</span>,
&#9474;   <span style="color: #79740e;">"vega_id"</span>,
&#9474;   <span style="color: #79740e;">"ucsc_id"</span>,
&#9474;   <span style="color: #79740e;">"ena"</span>,
&#9474;   <span style="color: #79740e;">"refseq_accession"</span>,
&#9474;   <span style="color: #79740e;">"ccds_id"</span>,
&#9474;   <span style="color: #79740e;">"uniprot_ids"</span>,
&#9474;   <span style="color: #79740e;">"pubmed_id"</span>,
&#9474;   <span style="color: #79740e;">"mgd_id"</span>,
&#9474;   <span style="color: #79740e;">"rgd_id"</span>,
&#9474;   <span style="color: #79740e;">"lsdb"</span>,
&#9474;   <span style="color: #79740e;">"cosmic"</span>,
&#9474;   <span style="color: #79740e;">"omim_id"</span>,
&#9474;   <span style="color: #79740e;">"mirbase"</span>,
&#9474;   <span style="color: #79740e;">"homeodb"</span>,
&#9474;   <span style="color: #79740e;">"snornabase"</span>,
&#9474;   <span style="color: #79740e;">"bioparadigms_slc"</span>,
&#9474;   <span style="color: #79740e;">"orphanet"</span>,
&#9474;   <span style="color: #79740e;">"pseudogene_org"</span>,
&#9474;   <span style="color: #79740e;">"horde_id"</span>,
&#9474;   <span style="color: #79740e;">"merops"</span>,
&#9474;   <span style="color: #79740e;">"imgt"</span>,
&#9474;   <span style="color: #79740e;">"iuphar"</span>,
&#9474;   <span style="color: #79740e;">"kznf_gene_catalog"</span>,
&#9474;   <span style="color: #79740e;">"mamit_trnadb"</span>,
&#9474;   <span style="color: #79740e;">"cd"</span>,
&#9474;   <span style="color: #79740e;">"lncrnadb"</span>,
&#9474;   <span style="color: #79740e;">"enzyme_id"</span>,
&#9474;   <span style="color: #79740e;">"intermediate_filament_db"</span>,
&#9474;   <span style="color: #79740e;">"rna_central_ids"</span>,
&#9474;   <span style="color: #79740e;">"lncipedia"</span>,
&#9474;   <span style="color: #79740e;">"gtrnadb"</span>,
&#9474;   <span style="color: #79740e;">"agr"</span>,
&#9474;   <span style="color: #79740e;">"mane_select"</span>,
&#9474;   <span style="color: #79740e;">"gencc"</span>,
]

<span style="color: #076678;">date_column_names</span> = [
&#9474;   <span style="color: #79740e;">"date_approved_reserved"</span>,
&#9474;   <span style="color: #79740e;">"date_symbol_changed"</span>,
&#9474;   <span style="color: #79740e;">"date_name_changed"</span>,
&#9474;   <span style="color: #79740e;">"date_modified"</span>,
]


<span style="color: #076678;">hgnc_data_path</span> = sys.argv[<span style="color: #8f3f71; font-weight: bold;">1</span>]
<span style="color: #076678;">hgnc_data_path</span> = Path(hgnc_data_path)

<span style="color: #076678;">repo_path</span> = sys.argv[<span style="color: #8f3f71; font-weight: bold;">2</span>]
<span style="color: #076678;">repo_path</span> = Path(repo_path)
repo_path.mkdir(exist_ok=<span style="color: #8f3f71;">True</span>)


<span style="color: #9d0006;">def</span> <span style="color: #b57614;">get_monthly_files</span>(hgnc_data_path):
&#9474;   <span style="color: #79740e; font-style: italic;">"""</span>
&#9474;<span style="color: #79740e; font-style: italic;">   The HGNC ftp directory has both tsv and txt for some files.</span>
&#9474;<span style="color: #79740e; font-style: italic;">   They are duplicates.</span>
&#9474;<span style="color: #79740e; font-style: italic;">   We are gonna just get the txt files.</span>
&#9474;<span style="color: #79740e; font-style: italic;">   """</span>
&#9474;   <span style="color: #076678;">hgnc_tsv_paths</span> = {
&#9474;   &#9474;   datetime.strptime(path.stem.split(<span style="color: #79740e;">"_"</span>)[-<span style="color: #8f3f71; font-weight: bold;">1</span>], <span style="color: #79740e;">"%Y-%m-%d"</span>): path
&#9474;   &#9474;   <span style="color: #9d0006;">for</span> path <span style="color: #9d0006;">in</span> hgnc_data_path.glob(<span style="color: #79740e;">"hgnc_complete_set*.txt"</span>)
&#9474;   }
&#9474;   <span style="color: #9d0006;">return</span> <span style="color: #af3a03;">dict</span>(<span style="color: #af3a03;">sorted</span>(hgnc_tsv_paths.items()))
&#9474;
&#9474;
<span style="color: #9d0006;">def</span> <span style="color: #b57614;">split_hgnc_tsv</span>(repo_path, hgnc_tsv_path):
&#9474;
&#9474;
&#9474;   <span style="color: #9d0006;">with</span> <span style="color: #af3a03;">open</span>(hgnc_tsv_path, <span style="color: #79740e;">"r"</span>) <span style="color: #9d0006;">as</span> f:
&#9474;   &#9474;   <span style="color: #076678;">reader</span> = csv.DictReader(f, delimiter=<span style="color: #79740e;">"</span><span style="color: #8f3f71;">\t</span><span style="color: #79740e;">"</span>)
&#9474;   &#9474;   <span style="color: #9d0006;">for</span> row <span style="color: #9d0006;">in</span> reader:
&#9474;   &#9474;   &#9474;   <span style="color: #79740e;">"""</span>
&#9474;<span style="color: #79740e;">   &#9474;   &#9474;   Puts None if value is empty string ''.</span>
&#9474;<span style="color: #79740e;">   &#9474;   &#9474;   This</span>
&#9474;<span style="color: #79740e;">   &#9474;   &#9474;   """</span>
&#9474;   &#9474;   &#9474;   <span style="color: #076678;">row</span> = {k: (v <span style="color: #9d0006;">if</span> v <span style="color: #9d0006;">else</span> <span style="color: #8f3f71;">None</span>) <span style="color: #9d0006;">for</span> k, v <span style="color: #9d0006;">in</span> row.items()}
&#9474;   &#9474;   &#9474;
&#9474;   &#9474;   &#9474;   <span style="color: #79740e; font-style: italic;">"""</span>
&#9474;<span style="color: #79740e; font-style: italic;">   &#9474;   &#9474;   I just copy pasted the column_names from the latest tsv.</span>
&#9474;<span style="color: #79740e; font-style: italic;">   &#9474;   &#9474;   Some of the column names don't exist in the older files.</span>
&#9474;<span style="color: #79740e; font-style: italic;">   &#9474;   &#9474;   Below section adds these keys with value None.</span>
&#9474;<span style="color: #79740e; font-style: italic;">   &#9474;   &#9474;   This way we are preventing KeyErrors down the road.</span>
&#9474;<span style="color: #79740e; font-style: italic;">   &#9474;   &#9474;   """</span>
&#9474;   &#9474;   &#9474;   <span style="color: #9d0006;">for</span> column_name <span style="color: #9d0006;">in</span> column_names:
&#9474;   &#9474;   &#9474;   &#9474;   <span style="color: #9d0006;">try</span>:
&#9474;   &#9474;   &#9474;   &#9474;   &#9474;   row[column_name]
&#9474;   &#9474;   &#9474;   &#9474;   <span style="color: #9d0006;">except</span> <span style="color: #8f3f71;">KeyError</span>:
&#9474;   &#9474;   &#9474;   &#9474;   &#9474;   <span style="color: #076678;">row</span>[column_name] = <span style="color: #8f3f71;">None</span>
&#9474;   &#9474;   &#9474;   &#9474;   &#9474;
&#9474;   &#9474;   &#9474;   <span style="color: #79740e; font-style: italic;">"""</span>
&#9474;<span style="color: #79740e; font-style: italic;">   &#9474;   &#9474;   ccds_ids are unsorted which create false diffs</span>
&#9474;<span style="color: #79740e; font-style: italic;">   &#9474;   &#9474;   That's why we are sorting them.</span>
&#9474;<span style="color: #79740e; font-style: italic;">   &#9474;   &#9474;   """</span>
&#9474;   &#9474;   &#9474;   <span style="color: #9d0006;">if</span> row[<span style="color: #79740e;">"ccds_id"</span>]:
&#9474;   &#9474;   &#9474;   &#9474;   <span style="color: #076678;">row</span>[<span style="color: #79740e;">"ccds_id"</span>] = <span style="color: #79740e;">"|"</span>.join(<span style="color: #af3a03;">sorted</span>(row[<span style="color: #79740e;">"ccds_id"</span>].split(<span style="color: #79740e;">"|"</span>)))
&#9474;   &#9474;   &#9474;   &#9474;
&#9474;   &#9474;   &#9474;   <span style="color: #79740e; font-style: italic;">"""</span>
&#9474;<span style="color: #79740e; font-style: italic;">   &#9474;   &#9474;   We create seperate directories for each gene</span>
&#9474;<span style="color: #79740e; font-style: italic;">   &#9474;   &#9474;   and write the values to seperate files.</span>
&#9474;<span style="color: #79740e; font-style: italic;">   &#9474;   &#9474;   """</span>
&#9474;   &#9474;   &#9474;   <span style="color: #076678;">entry_path</span> = repo_path.joinpath(row[<span style="color: #79740e;">"hgnc_id"</span>])
&#9474;   &#9474;   &#9474;   entry_path.mkdir(exist_ok=<span style="color: #8f3f71;">True</span>)
&#9474;   &#9474;   &#9474;   <span style="color: #9d0006;">for</span> column_name <span style="color: #9d0006;">in</span> column_names:
&#9474;   &#9474;   &#9474;   &#9474;   <span style="color: #9d0006;">if</span> row[column_name]:
&#9474;   &#9474;   &#9474;   &#9474;   &#9474;   <span style="color: #9d0006;">with</span> <span style="color: #af3a03;">open</span>(entry_path.joinpath(column_name), <span style="color: #79740e;">"w"</span>) <span style="color: #9d0006;">as</span> f:
&#9474;   &#9474;   &#9474;   &#9474;   &#9474;   &#9474;   &#9474;   f.write(row[column_name])
&#9474;   &#9474;   &#9474;   &#9474;   &#9474;   &#9474;   &#9474;
&#9474;   &#9474;   &#9474;   &#9474;   &#9474;   &#9474;   &#9474;
<span style="color: #9d0006;">def</span> <span style="color: #b57614;">commit_and_tag</span>(repo_path, commit_msg, tag_name):
&#9474;   <span style="color: #076678;">git_add_cmd</span> = [<span style="color: #79740e;">"git"</span>, <span style="color: #79740e;">"add"</span>, <span style="color: #79740e;">"."</span>]
&#9474;   <span style="color: #076678;">git_commit_cmd</span> = [<span style="color: #79740e;">"git"</span>, <span style="color: #79740e;">"commit"</span>, <span style="color: #79740e;">"-m"</span>, commit_msg]
&#9474;   <span style="color: #076678;">git_tag_cmd</span> = [<span style="color: #79740e;">"git"</span>, <span style="color: #79740e;">"tag"</span>, tag_name]
&#9474;
&#9474;   subprocess.run(git_add_cmd, cwd=<span style="color: #af3a03;">str</span>(repo_path))
&#9474;   subprocess.run(git_commit_cmd, cwd=<span style="color: #af3a03;">str</span>(repo_path))
&#9474;   subprocess.run(git_tag_cmd, cwd=<span style="color: #af3a03;">str</span>(repo_path))
&#9474;
&#9474;
<span style="color: #9d0006;">def</span> <span style="color: #b57614;">main</span>()      :
&#9474;   <span style="color: #076678;">hgnc_tsv_paths</span> = get_monthly_files(hgnc_data_path)
&#9474;   <span style="color: #af3a03;">print</span>(hgnc_data_path)
&#9474;   <span style="color: #af3a03;">print</span>(hgnc_tsv_paths)
&#9474;   <span style="color: #9d0006;">for</span> date, hgnc_tsv_path <span style="color: #9d0006;">in</span> hgnc_tsv_paths.items():
&#9474;   &#9474;   <span style="color: #af3a03;">print</span>(date.strftime(<span style="color: #79740e;">'"%Y-%m-%d",'</span>))
&#9474;   &#9474;   <span style="color: #076678;">commit_msg</span> = f<span style="color: #79740e;">'Added hgnc for date </span>{date.strftime("%Y-%m-%d")}<span style="color: #79740e;">'</span>
&#9474;   &#9474;   <span style="color: #076678;">tag_name</span> = f<span style="color: #79740e;">'</span>{date.strftime("%Y-%m-%d")}<span style="color: #79740e;">'</span>
&#9474;   &#9474;
&#9474;   &#9474;   subprocess.run(<span style="color: #79740e;">"rm -rf HGNC:*"</span>, cwd=<span style="color: #af3a03;">str</span>(repo_path), shell=<span style="color: #8f3f71;">True</span>)
&#9474;   &#9474;
&#9474;   &#9474;   split_hgnc_tsv(repo_path, hgnc_tsv_path)
&#9474;   &#9474;   commit_and_tag(repo_path, commit_msg, tag_name)
&#9474;   &#9474;
&#9474;   subprocess.run([<span style="color: #79740e;">"git"</span>, <span style="color: #79740e;">"push"</span>, <span style="color: #79740e;">"--tags"</span>], cwd=<span style="color: #af3a03;">str</span>(repo_path))
&#9474;
&#9474;
<span style="color: #9d0006;">if</span> <span style="color: #af3a03;">__name__</span> == <span style="color: #79740e;">"__main__"</span>:
&#9474;   main()
</pre>
</div>


</details>
</div>
</div>
<div id="outline-container-orgad64509" class="outline-3">
<h3 id="orgad64509">Visualization frontend</h3>
<div class="outline-text-3" id="text-orgad64509">
<p>
Heatmap is drawn with the d3.js.
</p>

<details class="code-details"
                 style ="padding: 1em;
                          background-color: #e5f5e5;
                          border-radius: 15px;
                          color: hsl(157 75%);
                          font-size: 0.9em;
                          box-shadow: 0.05em 0.1em 5px 0.01em  #00000057;">
                  <summary>
                    <strong>
                      <font face="Courier" size="3" color="green">
                         Click to see the implementation
                      </font>
                    </strong>
                  </summary>
<div class="org-src-container">
<pre class="src src-javascript"><span style="color: #9d0006;">function</span> <span style="color: #b57614;">drawheatmap</span>(<span style="color: #076678;">hgnc_id</span>, <span style="color: #076678;">hgnc_symbol</span>) {
&#9474; <span style="color: #9d0006;">const</span> <span style="color: #076678;">margin</span> = {top: <span style="color: #8f3f71; font-weight: bold;">0</span>, right: <span style="color: #8f3f71; font-weight: bold;">20</span>, bottom: <span style="color: #8f3f71; font-weight: bold;">80</span>, left: <span style="color: #8f3f71; font-weight: bold;">400</span>},
&#9474;   width = <span style="color: #8f3f71; font-weight: bold;">1050</span> - margin.left - margin.right,
&#9474;   height = <span style="color: #8f3f71; font-weight: bold;">900</span> - margin.top - margin.bottom;
&#9474;
&#9474; <span style="color: #a89984;">// </span><span style="color: #a89984;">append the svg object to the body of the page</span>
&#9474; <span style="color: #9d0006;">const</span> <span style="color: #076678;">svg</span> = d3.select(<span style="color: #79740e;">"#heatmap"</span>)
&#9474;   .append(<span style="color: #79740e;">"svg"</span>)
&#9474;   .attr(<span style="color: #79740e;">"width"</span>, width + margin.left + margin.right)
&#9474;   .attr(<span style="color: #79740e;">"height"</span>, height + margin.top + margin.bottom)
&#9474;   .append(<span style="color: #79740e;">"g"</span>)
&#9474;   .attr(<span style="color: #79740e;">"transform"</span>, <span style="color: #79740e;">`translate(${margin.left}, ${margin.top})`</span>);
&#9474;
&#9474;
&#9474; <span style="color: #9d0006;">const</span> <span style="color: #076678;">myGroups</span> = [
&#9474;   <span style="color: #79740e;">"2021-03-01"</span>, <span style="color: #79740e;">"2021-04-01"</span>, <span style="color: #79740e;">"2021-05-01"</span>, <span style="color: #79740e;">"2021-06-01"</span>, <span style="color: #79740e;">"2021-07-01"</span>,
&#9474;   <span style="color: #79740e;">"2021-08-01"</span>, <span style="color: #79740e;">"2021-09-01"</span>, <span style="color: #79740e;">"2021-10-01"</span>, <span style="color: #79740e;">"2021-11-01"</span>, <span style="color: #79740e;">"2021-12-01"</span>,
&#9474;   <span style="color: #79740e;">"2022-01-01"</span>, <span style="color: #79740e;">"2022-03-01"</span>, <span style="color: #79740e;">"2022-04-01"</span>, <span style="color: #79740e;">"2022-05-01"</span>, <span style="color: #79740e;">"2022-06-01"</span>,
&#9474;   <span style="color: #79740e;">"2022-07-01"</span>, <span style="color: #79740e;">"2022-09-01"</span>, <span style="color: #79740e;">"2022-10-01"</span>, <span style="color: #79740e;">"2023-01-01"</span>, <span style="color: #79740e;">"2023-03-02"</span>,
&#9474;   <span style="color: #79740e;">"2023-04-01"</span>, <span style="color: #79740e;">"2023-05-01"</span>, <span style="color: #79740e;">"2023-06-01"</span>, <span style="color: #79740e;">"2023-07-01"</span>, <span style="color: #79740e;">"2023-08-01"</span>,
&#9474;   <span style="color: #79740e;">"2023-09-01"</span>, <span style="color: #79740e;">"2023-10-01"</span>, <span style="color: #79740e;">"2023-11-01"</span>, <span style="color: #79740e;">"2023-12-01"</span>, <span style="color: #79740e;">"2024-01-01"</span>,
&#9474;   <span style="color: #79740e;">"2024-02-01"</span>, <span style="color: #79740e;">"2024-03-01"</span>, <span style="color: #79740e;">"2024-04-01"</span>, <span style="color: #79740e;">"2024-06-04"</span>,
&#9474; ]
&#9474; <span style="color: #a89984;">//</span><span style="color: #a89984;">Read the data</span>
&#9474; heatmap_data_url=<span style="color: #79740e;">"/bioscripts/hgnc_version/heatmap_data/"</span>.concat(hgnc_id)
&#9474; d3.csv(heatmap_data_url).then( <span style="color: #9d0006;">function</span>(<span style="color: #076678;">data</span>) {
&#9474;
&#9474;   <span style="color: #a89984;">// </span><span style="color: #a89984;">Labels of row and columns -&gt; unique identifier of the column called 'group' and 'variable'</span>
&#9474;   <span style="color: #a89984;">// </span><span style="color: #a89984;">const myGroups = Array.from(new Set(data.map(d =&gt; d.group))).sort((a, b) =&gt; new Date(a) - new Date(b));</span>
&#9474;   <span style="color: #9d0006;">const</span> <span style="color: #076678;">myVars</span> = Array.from(<span style="color: #9d0006;">new</span> <span style="color: #8f3f71;">Set</span>(data.map(d =&gt; d.variable)))
&#9474;
&#9474;
&#9474;   <span style="color: #a89984;">// </span><span style="color: #a89984;">Build X scales and axis:</span>
&#9474;   <span style="color: #9d0006;">const</span> <span style="color: #076678;">x</span> = d3.scaleBand()
&#9474;   &#9474; .range([ <span style="color: #8f3f71; font-weight: bold;">0</span>, width ])
&#9474;   &#9474; .domain(myGroups)
&#9474;   &#9474; .padding(<span style="color: #8f3f71; font-weight: bold;">0.05</span>);
&#9474;   svg.append(<span style="color: #79740e;">"g"</span>)
&#9474;   &#9474; .style(<span style="color: #79740e;">"font-size"</span>, <span style="color: #8f3f71; font-weight: bold;">15</span>)
&#9474;   &#9474; .attr(<span style="color: #79740e;">"transform"</span>, <span style="color: #79740e;">`translate(0, ${height})`</span>)
&#9474;   &#9474; .call(d3.axisBottom(x).tickSize(<span style="color: #8f3f71; font-weight: bold;">0</span>))
&#9474;   &#9474; .selectAll(<span style="color: #79740e;">"text"</span>)
&#9474;   &#9474; .attr(<span style="color: #79740e;">"transform"</span>, <span style="color: #79740e;">"rotate(-45)"</span>)
&#9474;   &#9474; .style(<span style="color: #79740e;">"text-anchor"</span>, <span style="color: #79740e;">"end"</span>)
&#9474;   &#9474; .select(<span style="color: #79740e;">".domain"</span>).remove()
&#9474;   &#9474;
&#9474;   <span style="color: #a89984;">// </span><span style="color: #a89984;">Build Y scales and axis:</span>
&#9474;   <span style="color: #9d0006;">const</span> <span style="color: #076678;">y</span> = d3.scaleBand()
&#9474;   &#9474; .range([ height, <span style="color: #8f3f71; font-weight: bold;">0</span> ])
&#9474;   &#9474; .domain(myVars)
&#9474;   &#9474; .padding(<span style="color: #8f3f71; font-weight: bold;">0.05</span>);
&#9474;   svg.append(<span style="color: #79740e;">"g"</span>)
&#9474;   &#9474; .style(<span style="color: #79740e;">"font-size"</span>, <span style="color: #8f3f71; font-weight: bold;">15</span>)
&#9474;   &#9474; .call(d3.axisLeft(y).tickSize(<span style="color: #8f3f71; font-weight: bold;">0</span>))
&#9474;   &#9474; .selectAll(<span style="color: #79740e;">"text"</span>)
&#9474;   &#9474; .attr(<span style="color: #79740e;">"transform"</span>, <span style="color: #79740e;">"rotate(-30)"</span>)
&#9474;   &#9474; .style(<span style="color: #79740e;">"text-anchor"</span>, <span style="color: #79740e;">"end"</span>)
&#9474;   &#9474; .select(<span style="color: #79740e;">".domain"</span>).remove()
&#9474;   &#9474;
&#9474;   <span style="color: #a89984;">// </span><span style="color: #a89984;">Build color scale</span>
&#9474; <span style="color: #9d0006;">const</span> <span style="color: #076678;">myColor</span> = d3.scaleOrdinal()
&#9474;   .domain([<span style="color: #79740e;">"M"</span>, <span style="color: #79740e;">"D"</span>, <span style="color: #79740e;">"A"</span>]) <span style="color: #a89984;">// </span><span style="color: #a89984;">Values in your data</span>
&#9474;   .range(d3.schemeCategory10);
&#9474;
&#9474;   <span style="color: #a89984;">// </span><span style="color: #a89984;">create a tooltip</span>
&#9474;   <span style="color: #9d0006;">const</span> <span style="color: #076678;">tooltip</span> = d3.select(<span style="color: #79740e;">"#heatmap"</span>)
&#9474;   &#9474; .append(<span style="color: #79740e;">"div"</span>)
&#9474;   &#9474; .style(<span style="color: #79740e;">"opacity"</span>, <span style="color: #8f3f71; font-weight: bold;">0</span>)
&#9474;   &#9474; .attr(<span style="color: #79740e;">"class"</span>, <span style="color: #79740e;">"tooltip"</span>)
&#9474;   .style(<span style="color: #79740e;">"position"</span>, <span style="color: #79740e;">"absolute"</span>)  <span style="color: #a89984;">// </span><span style="color: #a89984;">Set the position to absolute</span>
&#9474;   &#9474; .style(<span style="color: #79740e;">"border"</span>, <span style="color: #79740e;">"solid"</span>)
&#9474;   &#9474; .style(<span style="color: #79740e;">"border-width"</span>, <span style="color: #79740e;">"2px"</span>)
&#9474;   &#9474; .style(<span style="color: #79740e;">"border-radius"</span>, <span style="color: #79740e;">"5px"</span>)
&#9474;   &#9474; .style(<span style="color: #79740e;">"padding"</span>, <span style="color: #79740e;">"5px"</span>)
&#9474;   &#9474; .style(<span style="color: #79740e;">"background-color"</span>, <span style="color: #79740e;">"var(--body-bg-color)"</span>)
&#9474;   &#9474;
&#9474;   <span style="color: #a89984;">// </span><span style="color: #a89984;">Three function that change the tooltip when user hover / move / leave a cell</span>
&#9474;   <span style="color: #9d0006;">const</span> <span style="color: #076678;">mouseover</span> = <span style="color: #9d0006;">function</span>(<span style="color: #076678;">event</span>,<span style="color: #076678;">d</span>) {
&#9474;   &#9474; tooltip
&#9474;   &#9474;   .style(<span style="color: #79740e;">"opacity"</span>, <span style="color: #8f3f71; font-weight: bold;">1</span>)
&#9474;   &#9474; d3.select(<span style="color: #8f3f71;">this</span>)
&#9474;   &#9474;   .style(<span style="color: #79740e;">"stroke"</span>, <span style="color: #79740e;">"black"</span>)
&#9474;   &#9474;   .style(<span style="color: #79740e;">"opacity"</span>, <span style="color: #8f3f71; font-weight: bold;">1</span>)
&#9474;   }
&#9474;   <span style="color: #9d0006;">const</span> <span style="color: #076678;">mousemove</span> = <span style="color: #9d0006;">function</span>(<span style="color: #076678;">event</span>,<span style="color: #076678;">d</span>) {
&#9474;   &#9474; tooltip
&#9474;   &#9474;   .html(<span style="color: #79740e;">"Diff:"</span> + d.diff)
&#9474;   &#9474;   .style(<span style="color: #79740e;">"left"</span>, (event.pageX) + <span style="color: #79740e;">"px"</span>)
&#9474;   &#9474;   .style(<span style="color: #79740e;">"top"</span>, (event.pageY) + <span style="color: #79740e;">"px"</span>)
&#9474;   }
&#9474;   <span style="color: #9d0006;">const</span> <span style="color: #076678;">mouseleave</span> = <span style="color: #9d0006;">function</span>(<span style="color: #076678;">event</span>,<span style="color: #076678;">d</span>) {
&#9474;   &#9474; tooltip
&#9474;   &#9474;   .style(<span style="color: #79740e;">"opacity"</span>, <span style="color: #8f3f71; font-weight: bold;">0</span>)
&#9474;   &#9474; d3.select(<span style="color: #8f3f71;">this</span>)
&#9474;   &#9474;   .style(<span style="color: #79740e;">"stroke"</span>, <span style="color: #79740e;">"none"</span>)
&#9474;   &#9474;   .style(<span style="color: #79740e;">"opacity"</span>, <span style="color: #8f3f71; font-weight: bold;">0.8</span>)
&#9474;   }
&#9474;
&#9474;   <span style="color: #a89984;">// </span><span style="color: #a89984;">add the squares</span>
&#9474;   svg.selectAll()
&#9474;   &#9474; .data(data, <span style="color: #9d0006;">function</span>(<span style="color: #076678;">d</span>) {<span style="color: #9d0006;">return</span> d.group+<span style="color: #79740e;">':'</span>+d.variable;})
&#9474;   &#9474; .join(<span style="color: #79740e;">"rect"</span>)
&#9474;   &#9474;   .attr(<span style="color: #79740e;">"x"</span>, <span style="color: #9d0006;">function</span>(<span style="color: #076678;">d</span>) { <span style="color: #9d0006;">return</span> x(d.group) })
&#9474;   &#9474;   .attr(<span style="color: #79740e;">"y"</span>, <span style="color: #9d0006;">function</span>(<span style="color: #076678;">d</span>) { <span style="color: #9d0006;">return</span> y(d.variable) })
&#9474;   &#9474;   .attr(<span style="color: #79740e;">"rx"</span>, <span style="color: #8f3f71; font-weight: bold;">4</span>)
&#9474;   &#9474;   .attr(<span style="color: #79740e;">"ry"</span>, <span style="color: #8f3f71; font-weight: bold;">4</span>)
&#9474;   &#9474;   .attr(<span style="color: #79740e;">"width"</span>, x.bandwidth() )
&#9474;   &#9474;   .attr(<span style="color: #79740e;">"height"</span>, y.bandwidth() )
&#9474;   &#9474;   .style(<span style="color: #79740e;">"fill"</span>, <span style="color: #9d0006;">function</span>(<span style="color: #076678;">d</span>) { <span style="color: #9d0006;">return</span> myColor(d.value)} )
&#9474;   &#9474;   .style(<span style="color: #79740e;">"stroke-width"</span>, <span style="color: #8f3f71; font-weight: bold;">4</span>)
&#9474;   &#9474;   .style(<span style="color: #79740e;">"stroke"</span>, <span style="color: #79740e;">"none"</span>)
&#9474;   &#9474;   .style(<span style="color: #79740e;">"opacity"</span>, <span style="color: #8f3f71; font-weight: bold;">0.8</span>)
&#9474;   &#9474; .on(<span style="color: #79740e;">"mouseover"</span>, mouseover)
&#9474;   &#9474; .on(<span style="color: #79740e;">"mousemove"</span>, mousemove)
&#9474;   &#9474; .on(<span style="color: #79740e;">"mouseleave"</span>, mouseleave)
&#9474;   &#9474;
<span style="color: #a89984;">// </span><span style="color: #a89984;">Define legend data</span>
<span style="color: #9d0006;">const</span> <span style="color: #076678;">legendData</span> = [<span style="color: #79740e;">"Modified"</span>, <span style="color: #79740e;">"Deleted"</span>, <span style="color: #79740e;">"Added"</span>];

<span style="color: #a89984;">// </span><span style="color: #a89984;">Define legend dimensions</span>
<span style="color: #9d0006;">const</span> <span style="color: #076678;">legendWidth</span> = <span style="color: #8f3f71; font-weight: bold;">100</span>; <span style="color: #a89984;">// </span><span style="color: #a89984;">Adjust width as needed</span>
<span style="color: #9d0006;">const</span> <span style="color: #076678;">legendHeight</span> = <span style="color: #8f3f71; font-weight: bold;">30</span> * legendData.length; <span style="color: #a89984;">// </span><span style="color: #a89984;">Assuming each legend item has a height of 30</span>

<span style="color: #a89984;">// </span><span style="color: #a89984;">Append a group element for the legend</span>
<span style="color: #9d0006;">const</span> <span style="color: #076678;">legend</span> = svg.append(<span style="color: #79740e;">"g"</span>)
&#9474;   .attr(<span style="color: #79740e;">"class"</span>, <span style="color: #79740e;">"legend"</span>)
&#9474;   .attr(<span style="color: #79740e;">"transform"</span>, <span style="color: #79740e;">`translate(${margin.left}, ${height + margin.top})`</span>); <span style="color: #a89984;">// </span><span style="color: #a89984;">Position the legend at the bottom left</span>
&#9474;
<span style="color: #9d0006;">const</span> <span style="color: #076678;">rectRadius</span> = <span style="color: #8f3f71; font-weight: bold;">7</span>; <span style="color: #a89984;">// </span><span style="color: #a89984;">Adjust the radius of the rounded corners as needed</span>
<span style="color: #9d0006;">const</span> <span style="color: #076678;">rectHeight</span> = <span style="color: #8f3f71; font-weight: bold;">20</span>; <span style="color: #a89984;">// </span><span style="color: #a89984;">Height of each legend item rectangle</span>
<span style="color: #9d0006;">const</span> <span style="color: #076678;">gap</span> = <span style="color: #8f3f71; font-weight: bold;">5</span>; <span style="color: #a89984;">// </span><span style="color: #a89984;">Gap between legend items</span>
<span style="color: #a89984;">// </span><span style="color: #a89984;">Append rectangles and text for each legend item</span>
<span style="color: #9d0006;">const</span> <span style="color: #076678;">legendItems</span> = legend.selectAll(<span style="color: #79740e;">".legend-item"</span>)
&#9474;   .data(legendData)
&#9474;   .enter()
&#9474;   .append(<span style="color: #79740e;">"g"</span>)
&#9474;   .attr(<span style="color: #79740e;">"class"</span>, <span style="color: #79740e;">"legend-item"</span>)
&#9474;   .attr(<span style="color: #79740e;">"transform"</span>, (d, i) =&gt; <span style="color: #79740e;">`translate(0, ${i * (rectHeight + gap)})`</span>); <span style="color: #a89984;">// </span><span style="color: #a89984;">Adjusted vertical positioning with gap</span>
&#9474;
legendItems.append(<span style="color: #79740e;">"rect"</span>)
&#9474;   .attr(<span style="color: #79740e;">"x"</span>, -margin.left - <span style="color: #8f3f71; font-weight: bold;">330</span>)
&#9474;   .attr(<span style="color: #79740e;">"y"</span>, -<span style="color: #8f3f71; font-weight: bold;">120</span>)
&#9474;   .attr(<span style="color: #79740e;">"width"</span>, <span style="color: #8f3f71; font-weight: bold;">20</span>)
&#9474;   .attr(<span style="color: #79740e;">"height"</span>, rectHeight)
&#9474;   .attr(<span style="color: #79740e;">"rx"</span>, rectRadius) <span style="color: #a89984;">// </span><span style="color: #a89984;">Set the horizontal radius for rounded corners</span>
&#9474;   .attr(<span style="color: #79740e;">"ry"</span>, rectRadius) <span style="color: #a89984;">// </span><span style="color: #a89984;">Set the vertical radius for rounded corners</span>
&#9474;   .style(<span style="color: #79740e;">"fill"</span>, d =&gt; myColor(d[<span style="color: #8f3f71; font-weight: bold;">0</span>])); <span style="color: #a89984;">// </span><span style="color: #a89984;">Get the color based on the first character of the legend item</span>
&#9474;
legendItems.append(<span style="color: #79740e;">"text"</span>)
&#9474;   .attr(<span style="color: #79740e;">"x"</span>, -margin.left - <span style="color: #8f3f71; font-weight: bold;">300</span>)
&#9474;   .attr(<span style="color: #79740e;">"y"</span>, -<span style="color: #8f3f71; font-weight: bold;">100</span>)
&#9474;   .style(<span style="color: #79740e;">"font-size"</span>, <span style="color: #79740e;">"12px"</span>)
&#9474;   .style(<span style="color: #79740e;">"font-family"</span>, <span style="color: #79740e;">"sans-serif"</span>) <span style="color: #a89984;">// </span><span style="color: #a89984;">Set font family to sans-serif</span>
&#9474;   .style(<span style="color: #79740e;">"fill"</span>, d =&gt; myColor(d[<span style="color: #8f3f71; font-weight: bold;">0</span>])) <span style="color: #a89984;">// </span><span style="color: #a89984;">Get the color based on the first character of the legend item</span>
&#9474;   .text(d =&gt; d);
&#9474;
&#9474; })
&#9474;
&#9474; <span style="color: #a89984;">// </span><span style="color: #a89984;">Add title to graph</span>
&#9474; svg.append(<span style="color: #79740e;">"foreignObject"</span>)
&#9474;   &#9474; .attr(<span style="color: #79740e;">"x"</span>, -margin.left)
&#9474;   &#9474; .attr(<span style="color: #79740e;">"y"</span>, +<span style="color: #8f3f71; font-weight: bold;">180</span>)
&#9474;   &#9474; .attr(<span style="color: #79740e;">"width"</span>, width)
&#9474;   &#9474; .attr(<span style="color: #79740e;">"height"</span>, <span style="color: #8f3f71; font-weight: bold;">150</span>)
&#9474;   .append(<span style="color: #79740e;">"xhtml:div"</span>)
&#9474;   &#9474; .style(<span style="color: #79740e;">"font-size"</span>, <span style="color: #79740e;">"1.2em"</span>)
&#9474;   &#9474; .html(<span style="color: #79740e;">`Changes for &lt;span class="gene-symbol"&gt;${hgnc_symbol}&lt;/span&gt; &lt;/br&gt; from ${myGroups[0]} &lt;/br&gt; to ${myGroups[myGroups.length -1]}`</span>);
&#9474;  <span style="color: #a89984;">// </span><span style="color: #a89984;">Add subtitle to graph</span>
&#9474;  svg.append(<span style="color: #79740e;">"foreignObject"</span>)
&#9474;   &#9474; .attr(<span style="color: #79740e;">"x"</span>, -margin.left)
&#9474;   &#9474; .attr(<span style="color: #79740e;">"y"</span>, +<span style="color: #8f3f71; font-weight: bold;">350</span>)
&#9474;   &#9474; .attr(<span style="color: #79740e;">"width"</span>, width)
&#9474;   &#9474; .attr(<span style="color: #79740e;">"height"</span>, <span style="color: #8f3f71; font-weight: bold;">150</span>)
&#9474;   &#9474; .append(<span style="color: #79740e;">"xhtml:div"</span>)
&#9474;   &#9474; .style(<span style="color: #79740e;">"font-size"</span>, <span style="color: #79740e;">".8em"</span>)
&#9474;   &#9474; .style(<span style="color: #79740e;">"fill"</span>, <span style="color: #79740e;">"grey"</span>)
&#9474;   &#9474; .style(<span style="color: #79740e;">"max-width"</span>, <span style="color: #8f3f71; font-weight: bold;">400</span>)
&#9474;   &#9474; .html(<span style="color: #79740e;">`&lt;a href="${heatmap_data_url}"&gt;Download the diff table&lt;/a&gt; &lt;/br&gt; &lt;a href="https://www.genenames.org/download/archive/"&gt;View the column definitions&lt;/a&gt;`</span>);
}
</pre>
</div>


</details>
</div>
</div>
<div id="outline-container-org231c2f8" class="outline-3">
<h3 id="org231c2f8">Django backend</h3>
<div class="outline-text-3" id="text-org231c2f8">
<p>
This part gets the <a class="org-gls" href="#gls.1" id="glsr.1.9">HGNC</a> ID from the form and returns the diff data for d3.js.
</p>

<details class="code-details"
                 style ="padding: 1em;
                          background-color: #e5f5e5;
                          border-radius: 15px;
                          color: hsl(157 75%);
                          font-size: 0.9em;
                          box-shadow: 0.05em 0.1em 5px 0.01em  #00000057;">
                  <summary>
                    <strong>
                      <font face="Courier" size="3" color="green">
                         Click to see the implementation
                      </font>
                    </strong>
                  </summary>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #9d0006;">def</span> <span style="color: #b57614;">left_join_lists</span>(list1, list2):
&#9474;   <span style="color: #076678;">joined_list</span> = []
&#9474;
&#9474;   <span style="color: #9d0006;">for</span> sublist1 <span style="color: #9d0006;">in</span> list1:
&#9474;   &#9474;   <span style="color: #076678;">joined_sublist</span> = sublist1.copy()
&#9474;   &#9474;
&#9474;   &#9474;   <span style="color: #9d0006;">for</span> sublist2 <span style="color: #9d0006;">in</span> list2:
&#9474;   &#9474;   &#9474;   <span style="color: #9d0006;">if</span> sublist1[:<span style="color: #8f3f71; font-weight: bold;">2</span>] == sublist2[:<span style="color: #8f3f71; font-weight: bold;">2</span>]:
&#9474;   &#9474;   &#9474;   &#9474;   joined_sublist.extend(sublist2[<span style="color: #8f3f71; font-weight: bold;">2</span>:])
&#9474;   &#9474;   &#9474;   &#9474;   <span style="color: #9d0006;">break</span>
&#9474;   &#9474;   joined_list.append(joined_sublist)
&#9474;   &#9474;
&#9474;   <span style="color: #9d0006;">return</span> joined_list
&#9474;
&#9474;
<span style="color: #9d0006;">class</span> <span style="color: #8f3f71;">Echo</span>:
&#9474;   <span style="color: #79740e; font-style: italic;">"""An object that implements just the write method of the file-like</span>
&#9474;<span style="color: #79740e; font-style: italic;">   interface.</span>
&#9474;<span style="color: #79740e; font-style: italic;">   """</span>
&#9474;
&#9474;   <span style="color: #9d0006;">def</span> <span style="color: #b57614;">write</span>(<span style="color: #9d0006;">self</span>, value):
&#9474;   &#9474;   <span style="color: #79740e; font-style: italic;">"""Write the value by returning it, instead of storing in a buffer."""</span>
&#9474;   &#9474;   <span style="color: #9d0006;">return</span> value
&#9474;   &#9474;
&#9474;   &#9474;
<span style="color: #9d0006;">def</span> <span style="color: #b57614;">get_heatmap_data</span>(request, hgnc_id):
&#9474;   <span style="color: #076678;">cmd</span> = f<span style="color: #79740e;">'git --git-dir </span>{os.path.join(hgnc_data_path, "hgnc-data.git")}<span style="color: #79740e;"> log -p --name-status --pretty="%d" -- HGNC:</span>{hgnc_id}<span style="color: #79740e;">'</span>
&#9474;
&#9474;   <span style="color: #076678;">data</span> = subprocess.check_output(cmd, shell=<span style="color: #8f3f71;">True</span>).decode(<span style="color: #79740e;">"utf-8"</span>)
&#9474;
&#9474;   <span style="color: #076678;">pattern</span> = re.<span style="color: #af3a03;">compile</span>(r<span style="color: #79740e;">"\(tag: (\d{4}-\d{2}-\d{2})\)|(\S+)\s+(\S+)"</span>)
&#9474;
&#9474;   <span style="color: #076678;">name_status</span> = []
&#9474;   <span style="color: #076678;">current_group</span> = <span style="color: #8f3f71;">None</span>
&#9474;   <span style="color: #9d0006;">for</span> line <span style="color: #9d0006;">in</span> data.splitlines():
&#9474;   &#9474;   <span style="color: #9d0006;">match</span> = pattern.search(line)
&#9474;   &#9474;   <span style="color: #9d0006;">if</span> <span style="color: #9d0006;">match</span>:
&#9474;   &#9474;   &#9474;   <span style="color: #9d0006;">if</span> <span style="color: #9d0006;">match</span>.group(<span style="color: #8f3f71; font-weight: bold;">1</span>):
&#9474;   &#9474;   &#9474;   &#9474;   <span style="color: #076678;">current_group</span> = <span style="color: #9d0006;">match</span>.group(<span style="color: #8f3f71; font-weight: bold;">1</span>)
&#9474;   &#9474;   &#9474;   <span style="color: #9d0006;">else</span>:
&#9474;   &#9474;   &#9474;   &#9474;   <span style="color: #076678;">file_name</span> = <span style="color: #9d0006;">match</span>.group(<span style="color: #8f3f71; font-weight: bold;">3</span>).split(<span style="color: #79740e;">"/"</span>)[-<span style="color: #8f3f71; font-weight: bold;">1</span>]
&#9474;   &#9474;   &#9474;   &#9474;   <span style="color: #076678;">value</span> = <span style="color: #9d0006;">match</span>.group(<span style="color: #8f3f71; font-weight: bold;">2</span>)
&#9474;   &#9474;   &#9474;   &#9474;   name_status.append([current_group, file_name, value])
&#9474;   &#9474;   &#9474;   &#9474;
&#9474;   <span style="color: #076678;">cmd</span> = rf<span style="color: #79740e;">'git --git-dir </span>{os.path.join(hgnc_data_path, "hgnc-data.git")}<span style="color: #79740e;"> log -p  --pretty="%d" -- HGNC:</span>{hgnc_id}<span style="color: #79740e;"> | grep -v "^index\|^---\|^+++\|No newline \|^@\|^new"| sed "/^\s*$/d"'</span>
&#9474;   <span style="color: #076678;">data</span> = subprocess.check_output(cmd, shell=<span style="color: #8f3f71;">True</span>).decode(<span style="color: #79740e;">"utf-8"</span>)
&#9474;   <span style="color: #076678;">pattern</span> = re.<span style="color: #af3a03;">compile</span>(
&#9474;   &#9474;   r<span style="color: #79740e;">"\(tag: (\d{4}-\d{2}-\d{2})\)|(diff --git \S+\s+\S+)|(^\+|^-)"</span>
&#9474;   )
&#9474;   <span style="color: #076678;">diffs</span> = []
&#9474;   <span style="color: #076678;">current_group</span> = <span style="color: #8f3f71;">None</span>
&#9474;   <span style="color: #9d0006;">for</span> line <span style="color: #9d0006;">in</span> data.splitlines():
&#9474;   &#9474;   <span style="color: #9d0006;">match</span> = pattern.search(line)
&#9474;   &#9474;   <span style="color: #9d0006;">if</span> <span style="color: #9d0006;">match</span>:
&#9474;   &#9474;   &#9474;   <span style="color: #9d0006;">if</span> <span style="color: #9d0006;">match</span>.group(<span style="color: #8f3f71; font-weight: bold;">1</span>):
&#9474;   &#9474;   &#9474;   &#9474;   <span style="color: #076678;">current_group</span> = <span style="color: #9d0006;">match</span>.group(<span style="color: #8f3f71; font-weight: bold;">1</span>)
&#9474;   &#9474;   &#9474;   <span style="color: #9d0006;">elif</span> <span style="color: #9d0006;">match</span>.group(<span style="color: #8f3f71; font-weight: bold;">2</span>):
&#9474;   &#9474;   &#9474;   &#9474;   <span style="color: #076678;">file_name</span> = <span style="color: #9d0006;">match</span>.group(<span style="color: #8f3f71; font-weight: bold;">2</span>).split(<span style="color: #79740e;">"/"</span>)[-<span style="color: #8f3f71; font-weight: bold;">1</span>]
&#9474;   &#9474;   &#9474;   &#9474;   diffs.append([current_group, file_name, []])
&#9474;   &#9474;   &#9474;   <span style="color: #9d0006;">elif</span> <span style="color: #9d0006;">match</span>.group(<span style="color: #8f3f71; font-weight: bold;">3</span>):
&#9474;   &#9474;   &#9474;   &#9474;   diffs[-<span style="color: #8f3f71; font-weight: bold;">1</span>][<span style="color: #8f3f71; font-weight: bold;">2</span>].append(line)
&#9474;   <span style="color: #076678;">diffs</span> = [[diff[<span style="color: #8f3f71; font-weight: bold;">0</span>], diff[<span style="color: #8f3f71; font-weight: bold;">1</span>], <span style="color: #79740e;">"</span><span style="color: #8f3f71;">\n</span><span style="color: #79740e;">"</span>.join(diff[<span style="color: #8f3f71; font-weight: bold;">2</span>])] <span style="color: #9d0006;">for</span> diff <span style="color: #9d0006;">in</span> diffs]
&#9474;
&#9474;   <span style="color: #a89984;"># </span><span style="color: #a89984;">Process the data</span>
&#9474;   <span style="color: #076678;">header</span> = [<span style="color: #79740e;">"group"</span>, <span style="color: #79740e;">"variable"</span>, <span style="color: #79740e;">"value"</span>, <span style="color: #79740e;">"diff"</span>]
&#9474;   <span style="color: #076678;">rows</span> = left_join_lists(name_status, diffs)
&#9474;   rows.insert(<span style="color: #8f3f71; font-weight: bold;">0</span>, header)
&#9474;
&#9474;   <span style="color: #076678;">pseudo_buffer</span> = Echo()
&#9474;   <span style="color: #076678;">writer</span> = csv.writer(pseudo_buffer)
&#9474;   <span style="color: #9d0006;">return</span> StreamingHttpResponse(
&#9474;   &#9474;   (writer.writerow(row) <span style="color: #9d0006;">for</span> row <span style="color: #9d0006;">in</span> rows),
&#9474;   &#9474;   content_type=<span style="color: #79740e;">"text/csv"</span>,
&#9474;   &#9474;   headers={<span style="color: #79740e;">"Content-Disposition"</span>: f<span style="color: #79740e;">'attachment; filename="HGNC:</span>{hgnc_id}<span style="color: #79740e;">.csv"'</span>},
&#9474;   )

</pre>
</div>


</details>
</div>
</div>
</div>
<div id="outline-container-orga251a35" class="outline-2">
<h2 id="orga251a35"><span class="section-number-2">4.</span> References</h2>
<div class="outline-text-2" id="text-4">
<style>.csl-entry{text-indent: -1.5em; margin-left: 1.5em;}</style><div class="csl-bib-body">
  <div class="csl-entry"><a id="citeproc_bib_item_1"></a>Replogle, Joseph M., Reuben A. Saunders, Angela N. Pogson, Jeffrey A. Hussmann, Alexander Lenail, Alina Guna, Lauren Mascibroda, et al. 2022. “Mapping Information-Rich Genotype-Phenotype Landscapes with Genome-Scale Perturb-seq.” <i>Cell</i> 185 (14): 2559–75.e28. <a href="https://doi.org/10.1016/j.cell.2022.05.013">https://doi.org/10.1016/j.cell.2022.05.013</a>.</div>
  <div class="csl-entry"><a id="citeproc_bib_item_2"></a>Seal, Ruth L, Bryony Braschi, Kristian Gray, Tamsin E M Jones, Susan Tweedie, Liora Haim-Vilmovsky, and Elspeth A Bruford. 2022. “Genenames.Org: The HGNC Resources in 2023.” <i>Nucleic Acids Research</i>, October, gkac888. <a href="https://doi.org/10.1093/nar/gkac888">https://doi.org/10.1093/nar/gkac888</a>.</div>
</div>
</div>
</div>
<div id="outline-container-org0962011" class="outline-2">
<h2 id="org0962011"><span class="section-number-2">5.</span> Acronyms</h2>
<div class="outline-text-2" id="text-5">
<p>
<b><span class="org-glsdef" id="gls.22">CSV</span></b>&emsp;Comma separated values&ensp;<a class="org-glsdef" href="#glsr.2.1">1</a>
</p>

<p>
<b><span class="org-glsdef" id="gls.21">HGNC</span></b>&emsp;HUGO Gene Nomenclature Committee&ensp;<a class="org-glsdef" href="#glsr.1.1">1</a>, <a class="org-glsdef" href="#glsr.1.2">2</a>, <a class="org-glsdef" href="#glsr.1.3">3</a>, <a class="org-glsdef" href="#glsr.1.4">4</a>, <a class="org-glsdef" href="#glsr.1.5">5</a>, <a class="org-glsdef" href="#glsr.1.6">6</a>, <a class="org-glsdef" href="#glsr.1.7">7</a>, <a class="org-glsdef" href="#glsr.1.8">8</a>, <a class="org-glsdef" href="#glsr.1.9">9</a>
</p>
</div>
</div>
<div id="outline-container-orge3fdd9d" class="outline-2">
<h2 id="orge3fdd9d">Comments</h2>
<div class="outline-text-2" id="text-orge3fdd9d">
<section id="isso-thread">
<noscript>Javascript needs to be activated to view comments.</noscript>
</section>

<script src="https://cdn.jsdelivr.net/npm/zoom-vanilla.js/dist/zoom-vanilla.min.js" type="text/javascript"></script>
</div>
</div>
</div>
<div id="postamble" class="status">

<script src="https://omics.sbs/static/base/js/script.js"></script>
</div>
</body>
</html>
